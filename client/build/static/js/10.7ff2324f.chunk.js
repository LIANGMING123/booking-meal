(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{166:function(e,t,n){e.exports={Form_wrapper:"Form_Form_wrapper__QqSsD",Form_page:"Form_Form_page__7wk-h",Page_form:"Form_Page_form__4SeNr",Form_group:"Form_Form_group__1phnD",Form_field:"Form_Form_field__3UJZr",Invalid:"Form_Invalid__2diAN",Page_link:"Form_Page_link__1y_3j"}},167:function(e,t,n){"use strict";var r=n(164),a=n.n(r),c=n(165),o=n(1),u=n(171),s=n.n(u).a.create({baseURL:"http://localhost:7000/api/v2/",headers:{Accept:"application/json","Content-Type":"application/json"}});s.interceptors.request.use(function(e){return function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}(e)}),s.interceptors.response.use(function(e){return function(e){return 401===e.status&&console.log("Refresh Auth"),e}(e)});var i=s,p=n(172),l=n.n(p);l.a.settings({timeout:1500,resetOnHover:!0,position:"topRight",overlay:!0,overlayClose:!0});var f=function(e,t){l.a.show({color:{success:"green",error:"red",warning:"yellow",info:"blue"}[e],icon:"ico-".concat(e),title:"".concat(e.charAt(0).toUpperCase()+e.slice(1)),message:t})},d=function(e){return{type:o.R,path:e}},m=function(e){var t=e.email,n=e.password;return function(e){return new Promise(function(){var r=Object(c.a)(a.a.mark(function r(c,u){var s,p,l,d;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e({type:o.T}),r.prev=1,r.next=4,i.post("/auth/login",{email:t,password:n});case 4:s=r.sent,p=s.data,l=new Date((new Date).getTime()+864e5),localStorage.setItem("token",p.token),localStorage.setItem("expirationDate",l),f(p.status,p.message),e((m=p.user,{type:o.U,payload:m})),c(),r.next=20;break;case 14:r.prev=14,r.t0=r.catch(1),d=r.t0.response?r.t0.response.data.message:"Internal Server Error",f("error",d),e((a=r.t0,{type:o.S,payload:a})),u(r.t0);case 20:case"end":return r.stop()}var a,m},r,null,[[1,14]])}));return function(e,t){return r.apply(this,arguments)}}())}},v=function(e){var t=e.name,n=e.email,r=e.phone,u=e.password,s=e.type,p=e.catering_service;return function(e){return new Promise(function(){var l=Object(c.a)(a.a.mark(function c(l,d){var m,v,h,y;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e({type:o.W}),a.prev=1,a.next=4,i.post("/auth/signup",{name:t,email:n,phone:r,password:u,type:s,catering_service:p});case 4:m=a.sent,v=m.data,h=new Date((new Date).getTime()+864e5),localStorage.setItem("token",v.token),localStorage.setItem("expirationDate",h),f(v.status,v.message),e((g=v.user,{type:o.X,payload:g})),l(),a.next=20;break;case 14:a.prev=14,a.t0=a.catch(1),y=a.t0.response?a.t0.response.data.message:"Internal Server Error",f("error",y),e((c=a.t0,{type:o.V,payload:c})),d(a.t0);case 20:case"end":return a.stop()}var c,g},c,null,[[1,14]])}));return function(e,t){return l.apply(this,arguments)}}())}},h=function(){return localStorage.clear(),f("success","Logging Out..."),{type:o.a}},y=n(173),g=function(e){return{type:o.x,mealId:e}},b=function(){return{type:o.y}},w=function(){return function(){var e=Object(c.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:o.s}),e.prev=1,e.next=4,i.get("/menu");case 4:n=e.sent,t((a=n.data.data,{type:o.t,payload:a.map(function(e){return{id:e.id,catererId:e.catererId,catering_service:e.name,meals:e.menu.map(JSON.parse)}})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((r=e.t0,{type:o.r,error:r}));case 11:case"end":return e.stop()}var r,a},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},k=function(){return function(){var e=Object(c.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:o.v}),e.prev=1,e.next=4,i.get("/menu/caterer");case 4:n=e.sent,t((a=n.data.data,{type:o.w,payload:a.menu})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((r=e.t0,{type:o.u,error:r}));case 11:case"end":return e.stop()}var r,a},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},x=function(e){return function(t){return new Promise(function(){var n=Object(c.a)(a.a.mark(function n(r,c){var u,s,p,l,d,m,v;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t({type:o.p}),n.prev=1,u=!0,s=!1,n.prev=4,l=Object(y.a)(e);case 6:return n.next=8,l.next();case 8:return d=n.sent,u=d.done,n.next=12,d.value;case 12:if(m=n.sent,u){n.next=20;break}return v=m,n.next=17,i.post("/menu",v);case 17:u=!0,n.next=6;break;case 20:n.next=26;break;case 22:n.prev=22,n.t0=n.catch(4),s=!0,p=n.t0;case 26:if(n.prev=26,n.prev=27,u||null==l.return){n.next=31;break}return n.next=31,l.return();case 31:if(n.prev=31,!s){n.next=34;break}throw p;case 34:return n.finish(31);case 35:return n.finish(26);case 36:f("success","Menu Modified"),t({type:o.q}),r(),n.next=46;break;case 41:n.prev=41,n.t1=n.catch(1),f("error","Failed to Modify Menu"),t((a=n.t1,{type:o.o,error:a})),c(n.t1);case 46:case"end":return n.stop()}var a},n,null,[[1,41],[4,22,26,36],[27,,31,35]])}));return function(e,t){return n.apply(this,arguments)}}())}},_=function(e){return function(){var t=Object(c.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:o.A}),t.prev=1,t.next=4,i.post("/orders",e);case 4:r=t.sent,f(r.data.status,r.data.message),n({type:o.B}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),f("error","Failed to Add Meal to Orders"),n((a=t.t0,{type:o.z,error:a}));case 13:case"end":return t.stop()}var a},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},j=function(){return function(){var e=Object(c.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:o.M}),e.prev=1,e.next=4,i.get("/orders/user");case 4:n=e.sent,t((a=n.data.data,{type:o.N,payload:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((r=e.t0,{type:o.L,error:r}));case 11:case"end":return e.stop()}var r,a},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},O=function(e,t){return function(){var n=Object(c.a)(a.a.mark(function n(r){var c;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:o.P}),n.prev=1,n.next=4,i.put("/orders/".concat(e),{action:t});case 4:"warning"===(c=n.sent).data.status&&f(c.data.status,c.data.message),r(j()),r({type:o.Q}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),r((a=n.t0,{type:o.O,error:a}));case 13:case"end":return n.stop()}var a},n,null,[[1,10]])}));return function(e){return n.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(c.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:o.G}),t.prev=1,t.next=4,i.put("/orders/".concat(e),{action:"delete"});case 4:r=t.sent,f(r.data.status,r.data.message),n(j()),n({type:o.H}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),f("error","Failed to Delete Meal Order"),n((a=t.t0,{type:o.F,error:a}));case 14:case"end":return t.stop()}var a},t,null,[[1,10]])}));return function(e){return t.apply(this,arguments)}}()},F=function(){return function(){var e=Object(c.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:o.J}),e.prev=1,e.next=4,i.get("/orders");case 4:n=e.sent,t((a=n.data.data,{type:o.K,payload:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((r=e.t0,{type:o.I,error:r}));case 11:case"end":return e.stop()}var r,a},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},C=function(e){var t=e.billingAddress,n=e.city;return function(e){return new Promise(function(){var r=Object(c.a)(a.a.mark(function r(c,u){var s;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e({type:o.D}),r.prev=1,r.next=4,i.post("/orders/checkout",{billingAddress:"".concat(t,", ").concat(n)});case 4:s=r.sent,f(s.data.status,s.data.message),e(j()),e({type:o.E}),c(),r.next=16;break;case 11:r.prev=11,r.t0=r.catch(1),f("error","Failed to Checkout Order"),e((a=r.t0,{type:o.C,error:a})),u();case 16:case"end":return r.stop()}var a},r,null,[[1,11]])}));return function(e,t){return r.apply(this,arguments)}}())}},I=function(){return function(){var e=Object(c.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:o.i}),e.prev=1,e.next=4,i.get("/meals");case 4:n=e.sent,t((a=n.data.data,{type:o.j,payload:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((r=e.t0,{type:o.h,error:r}));case 11:case"end":return e.stop()}var r,a},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},N=function(){return{type:o.k}},P=function(e){return function(t){return new Promise(function(){var n=Object(c.a)(a.a.mark(function n(r,c){var u;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:o.c}),n.prev=1,n.next=4,i.post("/meals",e,{headers:{"Content-Type":"multipart/form-data"}});case 4:u=n.sent,f(u.data.status,u.data.message),t({type:o.d}),t(I()),r(),n.next=16;break;case 11:n.prev=11,n.t0=n.catch(1),f("error","Failed to Add Meal Option"),t((a=n.t0,{type:o.b,error:a})),c(n.t0);case 16:case"end":return n.stop()}var a},n,null,[[1,11]])}));return function(e,t){return n.apply(this,arguments)}}())}},A=function(e){return function(t){return new Promise(function(){var n=Object(c.a)(a.a.mark(function n(r,c){var u;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:o.f}),n.prev=1,n.next=4,i.delete("/meals/".concat(e));case 4:u=n.sent,f(u.data.status,u.data.message),t({type:o.g}),t(I()),r(),n.next=16;break;case 11:n.prev=11,n.t0=n.catch(1),f("error","Failed to Delete Meal Option"),t((a=n.t0,{type:o.e,error:a})),c(n.t0);case 16:case"end":return n.stop()}var a},n,null,[[1,11]])}));return function(e,t){return n.apply(this,arguments)}}())}},S=function(e,t){return function(n,r){return new Promise(function(){var u=Object(c.a)(a.a.mark(function c(u,s){var p,l,d;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:o.m}),a.prev=1,a.next=4,i.put("/meals/".concat(e),t);case 4:p=a.sent,f(p.data.status,p.data.message),l=r().meal.meals,d=[],l.forEach(function(e){e.quantity>0&&d.push({mealId:e.id,quantity:e.quantity})}),n(x(d)),n({type:o.n}),n(I()),u(),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(1),n((c=a.t0,{type:o.l,error:c})),s(a.t0);case 19:case"end":return a.stop()}var c},c,null,[[1,15]])}));return function(e,t){return u.apply(this,arguments)}}())}};n.d(t,"r",function(){return m}),n.d(t,"s",function(){return v}),n.d(t,"q",function(){return d}),n.d(t,"c",function(){return h}),n.d(t,"b",function(){return b}),n.d(t,"a",function(){return g}),n.d(t,"i",function(){return w}),n.d(t,"j",function(){return k}),n.d(t,"h",function(){return x}),n.d(t,"k",function(){return _}),n.d(t,"o",function(){return j}),n.d(t,"p",function(){return O}),n.d(t,"m",function(){return E}),n.d(t,"n",function(){return F}),n.d(t,"l",function(){return C}),n.d(t,"f",function(){return I}),n.d(t,"t",function(){return N}),n.d(t,"d",function(){return P}),n.d(t,"e",function(){return A}),n.d(t,"g",function(){return S})},169:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(21),o=n.n(c),u=n(166),s=n.n(u);t.a=a.a.memo(function(e){var t=null,n=[s.a.Form_field];switch(e.invalid&&e.shouldValidate&&e.touched&&n.push(s.a.Invalid),e.elementType){case"input":t=a.a.createElement("input",Object.assign({className:n.join(" ")},e.elementConfig,{value:e.value,onChange:e.changed}));break;case"textarea":t=a.a.createElement("textarea",Object.assign({className:n.join(" ")},e.elementConfig,{value:e.value,onChange:e.changed}));break;case"select":t=a.a.createElement("select",{className:n.join(" "),onChange:e.changed},e.elementConfig.options.map(function(e){return a.a.createElement("option",{key:e.value,value:e.value},e.displayValue)}));break;default:t=a.a.createElement("input",Object.assign({className:n.join(" ")},e.elementConfig,{value:e.value,onChange:e.changed}))}return a.a.createElement("div",{className:s.a.Form_group},t)},o.a)},175:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(166),o=n.n(c);t.a=function(e){return a.a.createElement("main",{className:o.a.Form_wrapper},a.a.createElement("section",{className:o.a.Form_page},e.children))}},176:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};t.a=a.a.memo(function(e){var t=e.user,n=e.type;return a.a.createElement("h3",null,a.a.createElement("span",{className:"Red"},"B"),"ook ",a.a.createElement("span",{className:"Red"},"A")," Mea",a.a.createElement("span",{className:"Red"},"l")," ",a.a.createElement("span",null,"register"===n?c(t):"")," ",a.a.createElement("span",{className:"Red"},c(n)))})},214:function(e,t,n){"use strict";n.r(t);var r=n(48),a=n(15),c=n(16),o=n(18),u=n(17),s=n(19),i=n(0),p=n.n(i),l=n(9),f=n(14),d=n(20),m=n(166),v=n.n(m),h=n(175),y=n(176),g=n(27),b=n(169),w=n(36),k=n(167),x=function(e){function t(){var e,n;Object(a.a)(this,t);for(var c=arguments.length,s=new Array(c),i=0;i<c;i++)s[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={controls:{email:{elementType:"input",elementConfig:{type:"email",name:"email",placeholder:"Your Email"},value:"",validation:{required:!0,isEmail:!0},valid:!1,touched:!1},password:{elementType:"input",elementConfig:{type:"password",name:"password",placeholder:"Password"},value:"",validation:{required:!0,minLength:7},valid:!1,touched:!1}},formIsValid:!1},n.handleUserLogin=function(e){e.preventDefault();var t={};for(var r in n.state.controls)t[r]=n.state.controls[r].value;n.props.onUserSignIn(t).then(function(){return n.props.history.push("/menu")}).catch(function(e){return console.log(e)})},n.inputChangeHandler=function(e,t){var a=Object(w.b)(n.state.controls[t],{value:e.target.value,valid:Object(w.a)(e.target.value,n.state.controls[t].validation),touched:!0}),c=Object(w.b)(n.state.controls,Object(r.a)({},t,a)),o=!0;for(var u in c)o=c[u].valid&&o;n.setState({controls:c,formIsValid:o})},n}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.state.controls).map(function(t){return{id:t,config:e.state.controls[t]}});return this.props.loading?p.a.createElement(g.a,null):p.a.createElement(h.a,null,p.a.createElement("form",{action:"#",method:"post",className:v.a.Page_form,id:"loginForm",onSubmit:this.handleUserLogin},p.a.createElement(y.a,{user:"user",type:"login"}),t.map(function(t){return p.a.createElement(b.a,{key:t.id,elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,invalid:!t.config.valid,touched:t.config.touched,shouldValidate:t.config.validation,changed:function(n){return e.inputChangeHandler(n,t.id)}})}),p.a.createElement("button",{type:"submit"},"Login"),p.a.createElement("p",{className:v.a.Page_link},"No Account? ",p.a.createElement(l.b,{to:"/register"},"Register")),p.a.createElement("p",{className:v.a.Page_link},"Back to Home? ",p.a.createElement(l.b,{to:"/"},"Click Here"))))}}]),t}(i.Component);t.default=Object(d.b)(function(e){return{loading:e.auth.loading,userAuthenticated:e.auth.isAuthenticated,authRedirectPath:e.auth.authRedirectPath}},function(e){return{onUserSignIn:function(t){return e(Object(k.r)(t))},onSetAuthRedirect:function(t){return e(Object(k.q)(t))}}})(Object(f.f)(x))}}]);
//# sourceMappingURL=10.7ff2324f.chunk.js.map