{"version":3,"sources":["components/MealList/MealList.js","containers/Caterer/CatererManageMenu/CatererMangeMenu.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_router_dom__WEBPACK_IMPORTED_MODULE_1__","_CatererMenus_CatererMenu_Menu_module_css__WEBPACK_IMPORTED_MODULE_2__","_CatererMenus_CatererMenu_Menu_module_css__WEBPACK_IMPORTED_MODULE_2___default","_Meal_Meal__WEBPACK_IMPORTED_MODULE_3__","_UI_Empty_Empty__WEBPACK_IMPORTED_MODULE_4__","emptyText","type","MealList","props","meals","sectionClasses","btns","_ref","checkout","saveMenu","toggleMealModal","topBtn","bottomBtn","push","classes","Cart__container","a","createElement","className","Right__Btn__lg","onClick","join","to","top","bottom","generateBtns","role","Menu__food","length","text","map","meal","Object","assign","key","id","CatererManageMenu","state","increaseQuantity","mealId","C_Users_TIMI_OLUMOFIN_Desktop_Projects_book_a_meal_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","_this","mealIndex","findIndex","quantity","setState","decreaseQuantity","mealsData","forEach","onAddMealToMenu","then","history","catch","error","console","log","this","onFetchCatererMeals","loading","react__WEBPACK_IMPORTED_MODULE_6___default","Fragment","_components_Header_Header__WEBPACK_IMPORTED_MODULE_9__","bannerText","_components_UI_Loading_Loading__WEBPACK_IMPORTED_MODULE_12__","_components_MealList_MealList__WEBPACK_IMPORTED_MODULE_11__","increase","decrease","_components_Footer_Footer__WEBPACK_IMPORTED_MODULE_10__","Component","connect","dispatch","mealFetchMeals","data","menuAddMealsToMenu","withRouter"],"mappings":"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","file":"static/js/16.2aba3860.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport classes from '../CatererMenus/CatererMenu/Menu.module.css';\r\n\r\nimport Meal from './Meal/Meal';\r\nimport Empty from '../UI/Empty/Empty';\r\n\r\nconst generateBtns = (sectionClasses, type, { checkout, saveMenu, toggleMealModal }) => {\r\n  let topBtn = null;\r\n  let bottomBtn = null;\r\n  switch (type) {\r\n    case 'orders':\r\n      sectionClasses.push(classes.Cart__container);\r\n      bottomBtn = (\r\n        <button className={classes.Right__Btn__lg} onClick={checkout}>\r\n          Make Order\r\n        </button>\r\n      );\r\n      break;\r\n    case 'manageMenu':\r\n      bottomBtn = (\r\n        <button className={['Btn', classes.Right__Btn__lg].join(' ')} onClick={saveMenu}>\r\n          Save\r\n        </button>\r\n      );\r\n      break;\r\n    case 'menuMeals':\r\n      topBtn = (\r\n        <Link to=\"/caterer/menu\" className={['Btn', classes.Right__Btn__lg].join(' ')}>\r\n          Manage Menu\r\n        </Link>\r\n      );\r\n      break;\r\n    case 'mealOptions':\r\n      topBtn = (\r\n        <button className={['Btn', classes.Right__Btn__lg].join(' ')} onClick={toggleMealModal}>\r\n          Add Meal Option\r\n        </button>\r\n      );\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  return { top: topBtn, bottom: bottomBtn };\r\n};\r\n\r\nconst emptyText = type => {\r\n  switch (type) {\r\n    case 'orders':\r\n      return 'Orders';\r\n    case 'menuMeals':\r\n      return 'Menu';\r\n    case 'manageMenu':\r\n    case 'mealOptions':\r\n      return 'Meal Options';\r\n    default:\r\n      return '';\r\n  }\r\n};\r\n\r\nconst MealList = props => {\r\n  const role = {\r\n    meals: 'meals'\r\n  };\r\n  const { type, meals, checkout, saveMenu, toggleMealModal } = props;\r\n  const sectionClasses = ['page-section'];\r\n  const btns = generateBtns(sectionClasses, type, { checkout, saveMenu, toggleMealModal });\r\n  return (\r\n    <section className={sectionClasses.join(' ')} role={role.meals}>\r\n      {btns.top}\r\n      <div className={classes.Menu__food}>\r\n        {meals.length === 0 ? (\r\n          <Empty text={emptyText(type)} />\r\n        ) : (\r\n          meals.map(meal => {\r\n            return <Meal key={meal.id} meal={meal} {...props} />;\r\n          })\r\n        )}\r\n      </div>\r\n      {btns.bottom}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default MealList;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport Header from '../../../components/Header/Header';\r\nimport Footer from '../../../components/Footer/Footer';\r\nimport MealList from '../../../components/MealList/MealList';\r\nimport Loading from '../../../components/UI/Loading/Loading';\r\n\r\nimport { mealFetchMeals, menuAddMealsToMenu } from '../../../redux/action';\r\n\r\nclass CatererManageMenu extends Component {\r\n  state = {\r\n    meals: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.onFetchCatererMeals();\r\n  }\r\n\r\n  componentWillReceiveProps(props) {\r\n    this.setState({ meals: props.meals });\r\n  }\r\n\r\n  increaseQuantity = mealId => {\r\n    const meals = [...this.state.meals];\r\n    const mealIndex = meals.findIndex(meal => meal.id === mealId);\r\n    meals[mealIndex].quantity += 1;\r\n    this.setState({ meals });\r\n  };\r\n\r\n  decreaseQuantity = mealId => {\r\n    const meals = [...this.state.meals];\r\n    const mealIndex = meals.findIndex(meal => meal.id === mealId);\r\n    meals[mealIndex].quantity -= 1;\r\n    this.setState({ meals });\r\n  };\r\n\r\n  saveMenu = () => {\r\n    const mealsData = [];\r\n    this.state.meals.forEach(meal => {\r\n      if (meal.quantity > 0) {\r\n        mealsData.push({ mealId: meal.id, quantity: meal.quantity });\r\n      }\r\n    });\r\n    this.props\r\n      .onAddMealToMenu(mealsData)\r\n      .then(() => {\r\n        this.props.history.push('/caterer');\r\n      })\r\n      .catch(error => console.log(error));\r\n  };\r\n\r\n  render() {\r\n    const { loading } = this.props;\r\n    return (\r\n      <>\r\n        <Header bannerText=\"Increase Food Options Quantity to add them to menu\" />\r\n        <main>\r\n          {loading ? (\r\n            <Loading />\r\n          ) : (\r\n            <MealList\r\n              type=\"manageMenu\"\r\n              meals={this.state.meals}\r\n              increase={this.increaseQuantity}\r\n              decrease={this.decreaseQuantity}\r\n              saveMenu={this.saveMenu}\r\n            />\r\n          )}\r\n        </main>\r\n        <Footer />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    loading: state.meal.loading,\r\n    meals: state.meal.meals\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onFetchCatererMeals: () => dispatch(mealFetchMeals()),\r\n    onAddMealToMenu: data => dispatch(menuAddMealsToMenu(data))\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(CatererManageMenu));\r\n"],"sourceRoot":""}