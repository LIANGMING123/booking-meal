(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{167:function(e,t,r){"use strict";var n=r(164),a=r.n(n),c=r(165),u=r(1),o=r(171),s=r.n(o).a.create({baseURL:"http://localhost:7000/api/v2/",headers:{Accept:"application/json","Content-Type":"application/json"}});s.interceptors.request.use(function(e){return function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}(e)}),s.interceptors.response.use(function(e){return function(e){return 401===e.status&&console.log("Refresh Auth"),e}(e)});var i=s,p=r(172),f=r.n(p);f.a.settings({timeout:1500,resetOnHover:!0,position:"topRight",overlay:!0,overlayClose:!0});var l=function(e,t){f.a.show({color:{success:"green",error:"red",warning:"yellow",info:"blue"}[e],icon:"ico-".concat(e),title:"".concat(e.charAt(0).toUpperCase()+e.slice(1)),message:t})},d=function(e){return{type:u.R,path:e}},v=function(e){var t=e.email,r=e.password;return function(e){return new Promise(function(){var n=Object(c.a)(a.a.mark(function n(c,o){var s,p,f,d;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e({type:u.T}),n.prev=1,n.next=4,i.post("/auth/login",{email:t,password:r});case 4:s=n.sent,p=s.data,f=new Date((new Date).getTime()+864e5),localStorage.setItem("token",p.token),localStorage.setItem("expirationDate",f),l(p.status,p.message),e((v=p.user,{type:u.U,payload:v})),c(),n.next=20;break;case 14:n.prev=14,n.t0=n.catch(1),d=n.t0.response?n.t0.response.data.message:"Internal Server Error",l("error",d),e((a=n.t0,{type:u.S,payload:a})),o(n.t0);case 20:case"end":return n.stop()}var a,v},n,null,[[1,14]])}));return function(e,t){return n.apply(this,arguments)}}())}},y=function(e){var t=e.name,r=e.email,n=e.phone,o=e.password,s=e.type,p=e.catering_service;return function(e){return new Promise(function(){var f=Object(c.a)(a.a.mark(function c(f,d){var v,y,h,m;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e({type:u.W}),a.prev=1,a.next=4,i.post("/auth/signup",{name:t,email:r,phone:n,password:o,type:s,catering_service:p});case 4:v=a.sent,y=v.data,h=new Date((new Date).getTime()+864e5),localStorage.setItem("token",y.token),localStorage.setItem("expirationDate",h),l(y.status,y.message),e((w=y.user,{type:u.X,payload:w})),f(),a.next=20;break;case 14:a.prev=14,a.t0=a.catch(1),m=a.t0.response?a.t0.response.data.message:"Internal Server Error",l("error",m),e((c=a.t0,{type:u.V,payload:c})),d(a.t0);case 20:case"end":return a.stop()}var c,w},c,null,[[1,14]])}));return function(e,t){return f.apply(this,arguments)}}())}},h=function(){return localStorage.clear(),l("success","Logging Out..."),{type:u.a}},m=r(173),w=function(e){return{type:u.x,mealId:e}},x=function(){return{type:u.y}},b=function(){return function(){var e=Object(c.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:u.s}),e.prev=1,e.next=4,i.get("/menu");case 4:r=e.sent,t((a=r.data.data,{type:u.t,payload:a.map(function(e){return{id:e.id,catererId:e.catererId,catering_service:e.name,meals:e.menu.map(JSON.parse)}})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((n=e.t0,{type:u.r,error:n}));case 11:case"end":return e.stop()}var n,a},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},k=function(){return function(){var e=Object(c.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:u.v}),e.prev=1,e.next=4,i.get("/menu/caterer");case 4:r=e.sent,t((a=r.data.data,{type:u.w,payload:a.menu})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((n=e.t0,{type:u.u,error:n}));case 11:case"end":return e.stop()}var n,a},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},g=function(e){return function(t){return new Promise(function(){var r=Object(c.a)(a.a.mark(function r(n,c){var o,s,p,f,d,v,y;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t({type:u.p}),r.prev=1,o=!0,s=!1,r.prev=4,f=Object(m.a)(e);case 6:return r.next=8,f.next();case 8:return d=r.sent,o=d.done,r.next=12,d.value;case 12:if(v=r.sent,o){r.next=20;break}return y=v,r.next=17,i.post("/menu",y);case 17:o=!0,r.next=6;break;case 20:r.next=26;break;case 22:r.prev=22,r.t0=r.catch(4),s=!0,p=r.t0;case 26:if(r.prev=26,r.prev=27,o||null==f.return){r.next=31;break}return r.next=31,f.return();case 31:if(r.prev=31,!s){r.next=34;break}throw p;case 34:return r.finish(31);case 35:return r.finish(26);case 36:l("success","Menu Modified"),t({type:u.q}),n(),r.next=46;break;case 41:r.prev=41,r.t1=r.catch(1),l("error","Failed to Modify Menu"),t((a=r.t1,{type:u.o,error:a})),c(r.t1);case 46:case"end":return r.stop()}var a},r,null,[[1,41],[4,22,26,36],[27,,31,35]])}));return function(e,t){return r.apply(this,arguments)}}())}},O=function(e){return function(){var t=Object(c.a)(a.a.mark(function t(r){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:u.A}),t.prev=1,t.next=4,i.post("/orders",e);case 4:n=t.sent,l(n.data.status,n.data.message),r({type:u.B}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),l("error","Failed to Add Meal to Orders"),r((a=t.t0,{type:u.z,error:a}));case 13:case"end":return t.stop()}var a},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},j=function(){return function(){var e=Object(c.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:u.M}),e.prev=1,e.next=4,i.get("/orders/user");case 4:r=e.sent,t((a=r.data.data,{type:u.N,payload:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((n=e.t0,{type:u.L,error:n}));case 11:case"end":return e.stop()}var n,a},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},I=function(e,t){return function(){var r=Object(c.a)(a.a.mark(function r(n){var c;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:u.P}),r.prev=1,r.next=4,i.put("/orders/".concat(e),{action:t});case 4:"warning"===(c=r.sent).data.status&&l(c.data.status,c.data.message),n(j()),n({type:u.Q}),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),n((a=r.t0,{type:u.O,error:a}));case 13:case"end":return r.stop()}var a},r,null,[[1,10]])}));return function(e){return r.apply(this,arguments)}}()},D=function(e){return function(){var t=Object(c.a)(a.a.mark(function t(r){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:u.G}),t.prev=1,t.next=4,i.put("/orders/".concat(e),{action:"delete"});case 4:n=t.sent,l(n.data.status,n.data.message),r(j()),r({type:u.H}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),l("error","Failed to Delete Meal Order"),r((a=t.t0,{type:u.F,error:a}));case 14:case"end":return t.stop()}var a},t,null,[[1,10]])}));return function(e){return t.apply(this,arguments)}}()},M=function(){return function(){var e=Object(c.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:u.J}),e.prev=1,e.next=4,i.get("/orders");case 4:r=e.sent,t((a=r.data.data,{type:u.K,payload:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((n=e.t0,{type:u.I,error:n}));case 11:case"end":return e.stop()}var n,a},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},S=function(e){var t=e.billingAddress,r=e.city;return function(e){return new Promise(function(){var n=Object(c.a)(a.a.mark(function n(c,o){var s;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e({type:u.D}),n.prev=1,n.next=4,i.post("/orders/checkout",{billingAddress:"".concat(t,", ").concat(r)});case 4:s=n.sent,l(s.data.status,s.data.message),e(j()),e({type:u.E}),c(),n.next=16;break;case 11:n.prev=11,n.t0=n.catch(1),l("error","Failed to Checkout Order"),e((a=n.t0,{type:u.C,error:a})),o();case 16:case"end":return n.stop()}var a},n,null,[[1,11]])}));return function(e,t){return n.apply(this,arguments)}}())}},A=function(){return function(){var e=Object(c.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:u.i}),e.prev=1,e.next=4,i.get("/meals");case 4:r=e.sent,t((a=r.data.data,{type:u.j,payload:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((n=e.t0,{type:u.h,error:n}));case 11:case"end":return e.stop()}var n,a},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},P=function(){return{type:u.k}},C=function(e){return function(t){return new Promise(function(){var r=Object(c.a)(a.a.mark(function r(n,c){var o;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:u.c}),r.prev=1,r.next=4,i.post("/meals",e,{headers:{"Content-Type":"multipart/form-data"}});case 4:o=r.sent,l(o.data.status,o.data.message),t({type:u.d}),t(A()),n(),r.next=16;break;case 11:r.prev=11,r.t0=r.catch(1),l("error","Failed to Add Meal Option"),t((a=r.t0,{type:u.b,error:a})),c(r.t0);case 16:case"end":return r.stop()}var a},r,null,[[1,11]])}));return function(e,t){return r.apply(this,arguments)}}())}},F=function(e){return function(t){return new Promise(function(){var r=Object(c.a)(a.a.mark(function r(n,c){var o;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:u.f}),r.prev=1,r.next=4,i.delete("/meals/".concat(e));case 4:o=r.sent,l(o.data.status,o.data.message),t({type:u.g}),t(A()),n(),r.next=16;break;case 11:r.prev=11,r.t0=r.catch(1),l("error","Failed to Delete Meal Option"),t((a=r.t0,{type:u.e,error:a})),c(r.t0);case 16:case"end":return r.stop()}var a},r,null,[[1,11]])}));return function(e,t){return r.apply(this,arguments)}}())}},q=function(e,t){return function(r,n){return new Promise(function(){var o=Object(c.a)(a.a.mark(function c(o,s){var p,f,d;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:u.m}),a.prev=1,a.next=4,i.put("/meals/".concat(e),t);case 4:p=a.sent,l(p.data.status,p.data.message),f=n().meal.meals,d=[],f.forEach(function(e){e.quantity>0&&d.push({mealId:e.id,quantity:e.quantity})}),r(g(d)),r({type:u.n}),r(A()),o(),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(1),r((c=a.t0,{type:u.l,error:c})),s(a.t0);case 19:case"end":return a.stop()}var c},c,null,[[1,15]])}));return function(e,t){return o.apply(this,arguments)}}())}};r.d(t,"r",function(){return v}),r.d(t,"s",function(){return y}),r.d(t,"q",function(){return d}),r.d(t,"c",function(){return h}),r.d(t,"b",function(){return x}),r.d(t,"a",function(){return w}),r.d(t,"i",function(){return b}),r.d(t,"j",function(){return k}),r.d(t,"h",function(){return g}),r.d(t,"k",function(){return O}),r.d(t,"o",function(){return j}),r.d(t,"p",function(){return I}),r.d(t,"m",function(){return D}),r.d(t,"n",function(){return M}),r.d(t,"l",function(){return S}),r.d(t,"f",function(){return A}),r.d(t,"t",function(){return P}),r.d(t,"d",function(){return C}),r.d(t,"e",function(){return F}),r.d(t,"g",function(){return q})},218:function(e,t,r){"use strict";r.r(t);var n=r(15),a=r(16),c=r(18),u=r(17),o=r(19),s=r(0),i=r.n(s),p=r(14),f=r(20),l=r(167),d=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.props.onLogout()}},{key:"render",value:function(){return i.a.createElement(p.a,{to:"/"})}}]),t}(s.Component);t.default=Object(f.b)(null,function(e){return{onLogout:function(){return e(Object(l.c)())}}})(d)}}]);
//# sourceMappingURL=17.edcb479c.chunk.js.map