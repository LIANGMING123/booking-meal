(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{167:function(e,t,r){"use strict";var a=r(164),n=r.n(a),s=r(165),c=r(1),o=r(171),u=r.n(o).a.create({baseURL:"http://localhost:7000/api/v2/",headers:{Accept:"application/json","Content-Type":"application/json"}});u.interceptors.request.use(function(e){return function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}(e)}),u.interceptors.response.use(function(e){return function(e){return 401===e.status&&console.log("Refresh Auth"),e}(e)});var i=u,l=r(172),p=r.n(l);p.a.settings({timeout:1500,resetOnHover:!0,position:"topRight",overlay:!0,overlayClose:!0});var _=function(e,t){p.a.show({color:{success:"green",error:"red",warning:"yellow",info:"blue"}[e],icon:"ico-".concat(e),title:"".concat(e.charAt(0).toUpperCase()+e.slice(1)),message:t})},d=function(e){return{type:c.R,path:e}},m=function(e){var t=e.email,r=e.password;return function(e){return new Promise(function(){var a=Object(s.a)(n.a.mark(function a(s,o){var u,l,p,d;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e({type:c.T}),a.prev=1,a.next=4,i.post("/auth/login",{email:t,password:r});case 4:u=a.sent,l=u.data,p=new Date((new Date).getTime()+864e5),localStorage.setItem("token",l.token),localStorage.setItem("expirationDate",p),_(l.status,l.message),e((m=l.user,{type:c.U,payload:m})),s(),a.next=20;break;case 14:a.prev=14,a.t0=a.catch(1),d=a.t0.response?a.t0.response.data.message:"Internal Server Error",_("error",d),e((n=a.t0,{type:c.S,payload:n})),o(a.t0);case 20:case"end":return a.stop()}var n,m},a,null,[[1,14]])}));return function(e,t){return a.apply(this,arguments)}}())}},f=function(e){var t=e.name,r=e.email,a=e.phone,o=e.password,u=e.type,l=e.catering_service;return function(e){return new Promise(function(){var p=Object(s.a)(n.a.mark(function s(p,d){var m,f,v,y;return n.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e({type:c.W}),n.prev=1,n.next=4,i.post("/auth/signup",{name:t,email:r,phone:a,password:o,type:u,catering_service:l});case 4:m=n.sent,f=m.data,v=new Date((new Date).getTime()+864e5),localStorage.setItem("token",f.token),localStorage.setItem("expirationDate",v),_(f.status,f.message),e((h=f.user,{type:c.X,payload:h})),p(),n.next=20;break;case 14:n.prev=14,n.t0=n.catch(1),y=n.t0.response?n.t0.response.data.message:"Internal Server Error",_("error",y),e((s=n.t0,{type:c.V,payload:s})),d(n.t0);case 20:case"end":return n.stop()}var s,h},s,null,[[1,14]])}));return function(e,t){return p.apply(this,arguments)}}())}},v=function(){return localStorage.clear(),_("success","Logging Out..."),{type:c.a}},y=r(173),h=function(e){return{type:c.x,mealId:e}},b=function(){return{type:c.y}},w=function(){return function(){var e=Object(s.a)(n.a.mark(function e(t){var r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:c.s}),e.prev=1,e.next=4,i.get("/menu");case 4:r=e.sent,t((n=r.data.data,{type:c.t,payload:n.map(function(e){return{id:e.id,catererId:e.catererId,catering_service:e.name,meals:e.menu.map(JSON.parse)}})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((a=e.t0,{type:c.r,error:a}));case 11:case"end":return e.stop()}var a,n},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},x=function(){return function(){var e=Object(s.a)(n.a.mark(function e(t){var r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:c.v}),e.prev=1,e.next=4,i.get("/menu/caterer");case 4:r=e.sent,t((n=r.data.data,{type:c.w,payload:n.menu})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((a=e.t0,{type:c.u,error:a}));case 11:case"end":return e.stop()}var a,n},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},T=function(e){return function(t){return new Promise(function(){var r=Object(s.a)(n.a.mark(function r(a,s){var o,u,l,p,d,m,f;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t({type:c.p}),r.prev=1,o=!0,u=!1,r.prev=4,p=Object(y.a)(e);case 6:return r.next=8,p.next();case 8:return d=r.sent,o=d.done,r.next=12,d.value;case 12:if(m=r.sent,o){r.next=20;break}return f=m,r.next=17,i.post("/menu",f);case 17:o=!0,r.next=6;break;case 20:r.next=26;break;case 22:r.prev=22,r.t0=r.catch(4),u=!0,l=r.t0;case 26:if(r.prev=26,r.prev=27,o||null==p.return){r.next=31;break}return r.next=31,p.return();case 31:if(r.prev=31,!u){r.next=34;break}throw l;case 34:return r.finish(31);case 35:return r.finish(26);case 36:_("success","Menu Modified"),t({type:c.q}),a(),r.next=46;break;case 41:r.prev=41,r.t1=r.catch(1),_("error","Failed to Modify Menu"),t((n=r.t1,{type:c.o,error:n})),s(r.t1);case 46:case"end":return r.stop()}var n},r,null,[[1,41],[4,22,26,36],[27,,31,35]])}));return function(e,t){return r.apply(this,arguments)}}())}},g=function(e){return function(){var t=Object(s.a)(n.a.mark(function t(r){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:c.A}),t.prev=1,t.next=4,i.post("/orders",e);case 4:a=t.sent,_(a.data.status,a.data.message),r({type:c.B}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),_("error","Failed to Add Meal to Orders"),r((n=t.t0,{type:c.z,error:n}));case 13:case"end":return t.stop()}var n},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},E=function(){return function(){var e=Object(s.a)(n.a.mark(function e(t){var r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:c.M}),e.prev=1,e.next=4,i.get("/orders/user");case 4:r=e.sent,t((n=r.data.data,{type:c.N,payload:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((a=e.t0,{type:c.L,error:a}));case 11:case"end":return e.stop()}var a,n},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},k=function(e,t){return function(){var r=Object(s.a)(n.a.mark(function r(a){var s;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a({type:c.P}),r.prev=1,r.next=4,i.put("/orders/".concat(e),{action:t});case 4:"warning"===(s=r.sent).data.status&&_(s.data.status,s.data.message),a(E()),a({type:c.Q}),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),a((n=r.t0,{type:c.O,error:n}));case 13:case"end":return r.stop()}var n},r,null,[[1,10]])}));return function(e){return r.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(s.a)(n.a.mark(function t(r){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:c.G}),t.prev=1,t.next=4,i.put("/orders/".concat(e),{action:"delete"});case 4:a=t.sent,_(a.data.status,a.data.message),r(E()),r({type:c.H}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),_("error","Failed to Delete Meal Order"),r((n=t.t0,{type:c.F,error:n}));case 14:case"end":return t.stop()}var n},t,null,[[1,10]])}));return function(e){return t.apply(this,arguments)}}()},j=function(){return function(){var e=Object(s.a)(n.a.mark(function e(t){var r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:c.J}),e.prev=1,e.next=4,i.get("/orders");case 4:r=e.sent,t((n=r.data.data,{type:c.K,payload:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((a=e.t0,{type:c.I,error:a}));case 11:case"end":return e.stop()}var a,n},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},N=function(e){var t=e.billingAddress,r=e.city;return function(e){return new Promise(function(){var a=Object(s.a)(n.a.mark(function a(s,o){var u;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e({type:c.D}),a.prev=1,a.next=4,i.post("/orders/checkout",{billingAddress:"".concat(t,", ").concat(r)});case 4:u=a.sent,_(u.data.status,u.data.message),e(E()),e({type:c.E}),s(),a.next=16;break;case 11:a.prev=11,a.t0=a.catch(1),_("error","Failed to Checkout Order"),e((n=a.t0,{type:c.C,error:n})),o();case 16:case"end":return a.stop()}var n},a,null,[[1,11]])}));return function(e,t){return a.apply(this,arguments)}}())}},D=function(){return function(){var e=Object(s.a)(n.a.mark(function e(t){var r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:c.i}),e.prev=1,e.next=4,i.get("/meals");case 4:r=e.sent,t((n=r.data.data,{type:c.j,payload:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((a=e.t0,{type:c.h,error:a}));case 11:case"end":return e.stop()}var a,n},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},S=function(){return{type:c.k}},F=function(e){return function(t){return new Promise(function(){var r=Object(s.a)(n.a.mark(function r(a,s){var o;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:c.c}),r.prev=1,r.next=4,i.post("/meals",e,{headers:{"Content-Type":"multipart/form-data"}});case 4:o=r.sent,_(o.data.status,o.data.message),t({type:c.d}),t(D()),a(),r.next=16;break;case 11:r.prev=11,r.t0=r.catch(1),_("error","Failed to Add Meal Option"),t((n=r.t0,{type:c.b,error:n})),s(r.t0);case 16:case"end":return r.stop()}var n},r,null,[[1,11]])}));return function(e,t){return r.apply(this,arguments)}}())}},A=function(e){return function(t){return new Promise(function(){var r=Object(s.a)(n.a.mark(function r(a,s){var o;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:c.f}),r.prev=1,r.next=4,i.delete("/meals/".concat(e));case 4:o=r.sent,_(o.data.status,o.data.message),t({type:c.g}),t(D()),a(),r.next=16;break;case 11:r.prev=11,r.t0=r.catch(1),_("error","Failed to Delete Meal Option"),t((n=r.t0,{type:c.e,error:n})),s(r.t0);case 16:case"end":return r.stop()}var n},r,null,[[1,11]])}));return function(e,t){return r.apply(this,arguments)}}())}},I=function(e,t){return function(r,a){return new Promise(function(){var o=Object(s.a)(n.a.mark(function s(o,u){var l,p,d;return n.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:c.m}),n.prev=1,n.next=4,i.put("/meals/".concat(e),t);case 4:l=n.sent,_(l.data.status,l.data.message),p=a().meal.meals,d=[],p.forEach(function(e){e.quantity>0&&d.push({mealId:e.id,quantity:e.quantity})}),r(T(d)),r({type:c.n}),r(D()),o(),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(1),r((s=n.t0,{type:c.l,error:s})),u(n.t0);case 19:case"end":return n.stop()}var s},s,null,[[1,15]])}));return function(e,t){return o.apply(this,arguments)}}())}};r.d(t,"r",function(){return m}),r.d(t,"s",function(){return f}),r.d(t,"q",function(){return d}),r.d(t,"c",function(){return v}),r.d(t,"b",function(){return b}),r.d(t,"a",function(){return h}),r.d(t,"i",function(){return w}),r.d(t,"j",function(){return x}),r.d(t,"h",function(){return T}),r.d(t,"k",function(){return g}),r.d(t,"o",function(){return E}),r.d(t,"p",function(){return k}),r.d(t,"m",function(){return O}),r.d(t,"n",function(){return j}),r.d(t,"l",function(){return N}),r.d(t,"f",function(){return D}),r.d(t,"t",function(){return S}),r.d(t,"d",function(){return F}),r.d(t,"e",function(){return A}),r.d(t,"g",function(){return I})},170:function(e,t,r){"use strict";var a=r(0),n=r.n(a),s=r(180),c=r.n(s),o=r(181),u=r.n(o);t.a=function(e){var t="Empty "+e.text,r=n.a.createElement("span",{className:"Red"},e.text);return n.a.createElement("div",{className:c.a.Empty},n.a.createElement("img",{src:u.a,alt:t}),n.a.createElement("p",{className:c.a.EmptyText},"Empty ",r))}},180:function(e,t,r){e.exports={Empty:"Empty_Empty__3FLfD",EmptyText:"Empty_EmptyText__U9qLT"}},181:function(e,t,r){e.exports=r.p+"static/media/empty.093f05ea.svg"},182:function(e,t,r){e.exports={Table:"Table_Table__WbckG",Table__head:"Table_Table__head__2lWVY",Table__row:"Table_Table__row__rNsSZ",Table__foot:"Table_Table__foot__2PKEA",Table__head__list:"Table_Table__head__list__3BO49",Table__row__list:"Table_Table__row__list__1Swr2",Table__foot__list:"Table_Table__foot__list__QeOP1",Table__head__list__item:"Table_Table__head__list__item__13D6e",Table__row__list__item:"Table_Table__row__list__item__3D7rH",Table__foot__list__item:"Table_Table__foot__list__item__10wdh",Order__summary__list:"Table_Order__summary__list__3h_6e",Order__summary__list__item:"Table_Order__summary__list__item__1elsG",Dash:"Table_Dash__OiJKK"}},183:function(e,t,r){"use strict";var a=r(0),n=r.n(a),s=r(182),c=r.n(s),o=function(e){return n.a.createElement("li",{className:e.classes.Table__head__list__item},e.text)},u=function(e){var t=e.rows.map(function(t){return n.a.createElement(o,{key:t,classes:e.classes,text:t})});return n.a.createElement("div",{className:e.classes.Table__head},n.a.createElement("ul",{className:e.classes.Table__head__list},t))},i=function(e){var t=e.order.meals.map(function(t){return n.a.createElement(n.a.Fragment,{key:t.id},n.a.createElement("li",{className:e.classes.Order__summary__list__item},n.a.createElement("p",null,t.name),n.a.createElement("span",{className:e.classes.Dash},"-"),n.a.createElement("p",null,t.quantity)))});return n.a.createElement("div",{className:e.classes.Table__row},n.a.createElement("ul",{className:e.classes.Table__row__list},n.a.createElement("li",{className:e.classes.Table__row__list__item},e.order.id),n.a.createElement("li",{className:e.classes.Table__row__list__item},e.order.user||e.order.caterer),n.a.createElement("li",{className:e.classes.Table__row__list__item},n.a.createElement("ul",{className:e.classes.Order__summary__list},t)),n.a.createElement("li",{className:e.classes.Table__row__list__item},e.order.date),n.a.createElement("li",{className:e.classes.Table__row__list__item},"$",e.order.total.toFixed(2))))},l=function(e){var t=e.orders.map(function(t){return n.a.createElement(i,{classes:e.classes,order:t,key:t.id})});return n.a.createElement("div",null,t)},p=function(e){var t=n.a.createElement("li",{className:e.classes.Table__foot__list__item},e.text);return"object"===typeof e.text&&(t=n.a.createElement("li",{className:e.classes.Table__foot__list__item},"$",e.text.total.toFixed(2))),t},_=function(e){var t=e.rows.map(function(t){return n.a.createElement(p,{key:t,classes:e.classes,text:t})});return n.a.createElement("div",{className:e.classes.Table__foot},n.a.createElement("ul",{className:e.classes.Table__foot__list},t))};t.a=function(e){var t=["#ID","Caterer","Order Summary","Order Date","Order Total"],r=["Total",{total:e.orders.reduce(function(e,t){return e+t.total},0)}];return e.todaysOrders&&t.splice(3,1),e.caterer&&(t[1]="Customer Name"),n.a.createElement("section",{className:["page-section",c.a.Table].join(" ")},n.a.createElement(u,{classes:c.a,rows:t}),n.a.createElement(l,{classes:c.a,orders:e.orders}),e.todaysOrders?n.a.createElement(_,{classes:c.a,rows:r}):null)}},223:function(e,t,r){"use strict";r.r(t);var a=r(15),n=r(16),s=r(18),c=r(17),o=r(19),u=r(0),i=r.n(u),l=r(20),p=r(47),_=r(46),d=r(183),m=r(27),f=r(170),v=r(167),y=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){this.props.onFetchOrders()}},{key:"render",value:function(){var e=i.a.createElement(d.a,{orders:this.props.orders,caterer:!0,todaysOrders:!0});return this.props.loading&&(e=i.a.createElement(m.a,null)),this.props.loading||0!==this.props.orders.length||(e=i.a.createElement(f.a,{text:"Orders"})),i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{bannerText:"Todays Order Summary",authenticated:this.props.catererAuthenticated,caterer:!0}),i.a.createElement("main",null,e),i.a.createElement(_.a,null))}}]),t}(u.Component);t.default=Object(l.b)(function(e){var t=[];return e.orders.catererOrders.forEach(function(e){var r="".concat((new Date).getMonth()+1),a="".concat((new Date).getFullYear(),"-").concat(r.padStart(2,"0"),"-").concat((new Date).getDate());e.createdAt===a&&t.push({id:e.id,user:e.user.name,meals:JSON.parse(e.order),total:e.total})}),{catererAuthenticated:e.auth.catererAuthenticated,loading:e.orders.loading,orders:t}},function(e){return{onFetchOrders:function(){return e(Object(v.n)())}}})(y)}}]);
//# sourceMappingURL=6.4227bf71.chunk.js.map